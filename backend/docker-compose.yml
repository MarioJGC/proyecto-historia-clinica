version: '3.8'

services:
  build-step:
    container_name: build-container
    image: node:20-alpine
    working_dir: /app
    volumes:
      - .:/app
    command: >
      /bin/sh -c "
      npm install &&
      npm run build --prod"

  nginx:
    container_name: nginx-container
    image: nginx:1.24.0-alpine
    ports:
      - "80:80"
    volumes:
      - ./dist:/usr/share/nginx/html
